<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../../components/head'); %>
  <title>Studors - Admin</title>
  <style>
    #user-list {
      white-space: pre-line;
    }
    body {
      height: 100%;
    }
  </style>
  <script src="/js/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8" src="/js/jquery.dataTables.js"></script>
</head>

<body>
  <%- include('../../components/header'); %>
  <div class="admin-list">
    <div id="user-list">
      <h2> Students: </h2>
      <table id="studentsTable">
        <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Grade</th>
          <th>Email</th>
          <th>Phone</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of students){ %>
        <tr>
          <% for(const key in obj) { %>
          <td><%= obj[key] %></td>
          <% } %>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Tutors: </h2>
      <table id="tutorsTable">
        <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Grade</th>
          <th>Email</th>
          <th>Phone</th>
          <th>Term Hours</th>
          <th>Total Hours</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of tutors){ %>
        <tr>
          <% for(const key in obj) { %>
          <td><%= obj[key] %></td>
          <% } %>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Admins: </h2>
      <table id="adminsTable">
        <thead>
        <tr>
          <th>First Name</th>
          <th>Last Name</th>
          <th>Grade</th>
          <th>Email</th>
          <th>Phone</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of admins){ %>
        <tr>
          <% for(const key in obj) { %>
          <td><%= obj[key] %></td>
          <% } %>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Allowed Student domains: </h2>
      <table id="allowedStudentsTable">
        <thead>
        <tr>
          <th>Domains</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of studentAllowed){ %>
        <tr>
          <td><%= obj['email'] %></td>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Allowed Tutors: </h2>
      <table id="allowedTutorsTable">
        <thead>
        <tr>
          <th>Email</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of tutorAllowed){ %>
        <tr>
          <td><%= obj['email'] %></td>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Allowed Admins: </h2>
      <table id="allowedAdminsTable">
        <thead>
        <tr>
          <th>Email</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of adminAllowed){ %>
        <tr>
          <td><%= obj['email'] %></td>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Time Slots: </h2>
      <table id="incrementsTable">
        <thead>
        <tr>
          <th>Time</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of increments){ %>
        <tr>
          <td><%= functions.formatTime(obj['hour']) %></td>
        </tr>
        <% } %>
      </tbody>
      </table>
      <h2> Off Days: </h2>
      <table id="offDaysTable">
        <thead>
        <tr>
          <th>Date</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of holidays){ %>
        <tr>
          <td><%= functions.formatDate(obj['holiday']).replace('00:00:00','') %></td>
        </tr>
        <% } %>
      </tbody>
      </table>
      <h2> Upcoming Sessions: </h2>
      <table id="upcomingSessionTable">
        <thead>
        <tr>
          <th>Time</th>
          <th>Tutor name</th>
          <th>Tutor surname</th>
          <th>Student name</th>
          <th>Student surname</th>
          <th>Subject</th>
          <th>Hours</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of upcomingSessions){ %>
        <tr>
          <% for(const key in obj) { %>
            <% if( key == "time_id") { %>
              <td><%= functions.formatDate(obj[key]) %></td><%
              }
              else { %>
          <td><%= obj[key] %></td>
          <% }
          } %>
        </tr>
        <% } %>
      </tbody>
      </table>
      <hr>
      <h2> Past Sessions: </h2>
      <table id="pastSessionTable">
        <thead>
        <tr>
          <th>Time</th>
          <th>Tutor name</th>
          <th>Tutor surname</th>
          <th>Student name</th>
          <th>Student surname</th>
          <th>Subject</th>
          <th>Hours</th>
        </tr>
        </thead>
        <tbody>
        <% for(const obj of pastSessions){ %>
        <tr>
          <% for(const key in obj) { %>
            <% if( key == "time_id") { %>
              <td><%= functions.formatDate(obj[key]) %></td><%
              }
              else { %>
          <td><%= obj[key] %></td>
          <% }
          } %>
        </tr>
        <% } %>
      </tbody>
      </table>
    </div>
  </div>
  <%- include('../../components/footer'); %>
</body>

<script>
  $(document).ready(function () {
    $('#studentsTable').DataTable();
    $('#tutorsTable').DataTable();
    $('#adminsTable').DataTable();
    $('#allowedStudentsTable').DataTable();
    $('#allowedTutorsTable').DataTable();
    $('#allowedAdminsTable').DataTable();
    $('#incrementsTable').DataTable();
    $('#offDaysTable').DataTable();
    $('#upcomingSessionTable').DataTable();
    $('#pastSessionTable').DataTable();
  });
</script>

</html>
